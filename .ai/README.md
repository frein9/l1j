# 문서 운영 헌법 (Docs Operating Constitution)

이 문서는 본 프로젝트의 문서 및 코드 변경 운영에 대한 필수 규칙을 정의한다.
AI 및 모든 기여자는 아래 규칙을 반드시 준수해야 한다.

------------------------------------------------------------
1. 문서 구조 정의
------------------------------------------------------------

## 1.1 디렉토리 구조

.ai/
├─ README.md
├─ current_state.md
├─ plans/
├─ tasks/
├─ decisions.md
├─ current_task.md
└─ (필요 시 features/, architecture/ 등 확장 가능)

------------------------------------------------------------
2. 핵심 시스템 문서
------------------------------------------------------------

### 2.1 .ai/current_state.md
- 코드 분석을 통해 확인된 "사실"만 기록한다.
- 추측, 가정, 의도는 기록하지 않는다.
- 실제 구현 상태와 반드시 일치해야 한다.

### 2.2 .ai/plans/ (날짜별 관리)
- 모든 작업은 날짜 기반 파일로 관리한다.
- 파일명 형식:

  YYYY-MM-DD-작업주제.md

  예:
  2026-02-19-auth-refresh.md

- 구현 전에 반드시 생성한다.
- 목표(Goal), 범위(Scope), 전략(Strategy)을 명확히 정의한다.
- 포함 항목과 제외 항목을 구분한다.
- 동일 날짜에 여러 작업이 있을 경우 주제로 구분한다.

### 2.3 .ai/tasks/ (plans와 1:1 대응)
- plans와 동일한 파일명으로 생성한다.
- 체크리스트 형태로 진행 상황을 관리한다.
- 완료 항목은 명확히 표시한다.
- 실제 진행 상황과 반드시 일치해야 한다.
- plan 없는 task 파일은 생성할 수 없다.

### 2.4 .ai/decisions.md
- 구조적/아키텍처적 의사결정을 기록한다.
- 결정 배경, 근거, 영향, 결과를 포함한다.
- 기존 결정을 삭제하지 않는다.
- 변경 시 후속 결정으로 추가 기록한다.

### 2.5 .ai/current_task.md
- 현재 활성 작업 목록을 유지한다.

------------------------------------------------------------
3. 필수 작업 절차 규칙
------------------------------------------------------------

1. 모든 작업은 plans 디렉토리에 날짜 기반 plan 파일 생성 후 시작한다.
2. 코드 변경이 발생하면 반드시:
- 대응하는 task 파일을 생성 또는 업데이트한다.
- current_state를 점검한다.
3. 모든 코드 변경은 다음을 명시해야 한다:
- 영향받는 모듈
- 영향받는 인터페이스(API / DB / 계약)
- 아키텍처 레이어 영향 여부
4. 구조적 변경은 반드시 decision 기록을 생성한다.
5. 근거가 없는 내용은 어떤 문서에도 기록하지 않는다.
6. 코드와 문서는 항상 동기화 상태를 유지해야 한다.
7. 문서 없는 코드 변경은 허용하지 않는다.

------------------------------------------------------------
4. 날짜 기반 문서 운영 원칙
------------------------------------------------------------

1. plan 및 task 파일은 날짜 + 주제 형식을 따른다.
2. 단순 날짜 파일(YYYY-MM-DD.md)은 금지한다.
3. 작업 완료 후에도 파일을 삭제하지 않는다.
4. 과거 작업은 수정하지 않으며, 변경이 필요하면 새로운 날짜 파일을 생성한다.
5. current_task.md 파일에 현재 활성 작업 목록을 유지한다.

------------------------------------------------------------
5. 아키텍처 보호 규칙
------------------------------------------------------------

1. 레이어 침범(Layer Violation)은 반드시 문서화한다.
2. 의존성 방향(Dependency Direction) 변경 시 사전 기록이 필요하다.
3. 모듈 간 구조 변경은 영향 분석 후 진행한다.
4. 구조를 변경하는 리팩토링은 반드시 기록한다.
5. 암묵적 구조 변경은 금지한다.

------------------------------------------------------------
6. 변경 추적 규칙
------------------------------------------------------------

중요 변경 사항에 대해 반드시 다음을 기록한다:

- 무엇이 변경되었는가?
- 왜 변경되었는가?
- 영향받는 모듈은 무엇인가?
- 예상 리스크는 무엇인가?
- 기존 계약(Contract)은 유지되는가?

위 정보는 반드시 다음 중 하나에 존재해야 한다:
- 해당 날짜의 plan 파일
- decisions.md
- 또는 기능 단위 문서

------------------------------------------------------------
7. AI 수행 규칙
------------------------------------------------------------

AI가 코드 변경을 수행할 경우 반드시 다음을 수행한다:

1. 생성된 plan 파일 경로를 명시한다.
2. 생성/수정된 task 파일 경로를 명시한다.
3. 변경된 코드 파일 목록을 명시한다.
4. 변경된 문서 파일 목록을 명시한다.
5. 아키텍처 보호 규칙 위반 여부를 점검한다.
6. 영향 범위를 요약 보고한다.
7. current_state와 실제 코드 상태의 일치 여부를 확인한다.

------------------------------------------------------------
8. 금지 사항
------------------------------------------------------------

- plan 없이 작업 시작
- plan 없는 task 생성
- 문서 없이 코드만 변경하는 행위
- 근거 없는 가정 기록
- 기존 의사결정 삭제
- 구조 변경을 기록하지 않는 리팩토링
- 영향 분석 없이 모듈 간 수정

------------------------------------------------------------
9. 기본 원칙
------------------------------------------------------------

- 코드 변경은 반드시 날짜 기반 기록을 남긴다.
- 기록되지 않은 변경은 존재하지 않는 것으로 간주한다.
- 문서는 코드의 보조 자료가 아니라 시스템의 일부이다.

------------------------------------------------------------
10. 현재 활성 작업 목록
------------------------------------------------------------

- 없음 (마지막 완료 작업: 2026-02-28 leaf-log-properties-load-fix)
